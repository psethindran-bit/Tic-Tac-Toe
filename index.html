<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe - Cyber Grid</title>

    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        /* ======= CSS ======= */
        :root {
            --dark-blue: #040d1a;
            --medium-blue: rgba(15, 42, 82, 0.85);
            --light-blue: #d9e6ff;
            --accent: #4a90e2;
            --neon-blue: #00eaff;
            --neon-green: #00ff88;
            --glass: rgba(255, 255, 255, 0.08);
            --white: #ffffff;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background: var(--dark-blue);
            background-image:
                linear-gradient(rgba(0, 234, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 234, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            color: var(--light-blue);
            font-family: 'Rajdhani', sans-serif;
            min-height: 100vh;
        }

        nav {
            backdrop-filter: blur(20px);
            background: var(--medium-blue);
            padding: 15px 60px;
            display: flex;
            justify-content: center;
            border-bottom: 1px solid rgba(0, 234, 255, 0.3);
        }

        .logo { 
            display: flex; 
            flex-direction: column; 
            text-align: center;
            animation: pulse-glow 3s infinite;
        }
        
        .logo-text {
            font-family: "Orbitron", sans-serif;
            font-size: 2.5rem;
            letter-spacing: 8px;
            color: var(--neon-blue);
            margin: 0;
            text-shadow: 0 0 15px rgba(0, 234, 255, 0.7);
        }

        .tagline {
            font-family: "Orbitron", sans-serif;
            font-size: 0.8rem;
            letter-spacing: 4px;
            color: var(--accent);
            margin: 0;
            text-transform: uppercase;
        }

        .hero-section {
            text-align: center;
            padding: 60px 20px 40px;
        }

        .page-title {
            font-family: 'Orbitron', monospace;
            font-size: clamp(3rem, 10vw, 5.5rem);
            font-weight: 900;
            background: linear-gradient(135deg, var(--white), var(--neon-blue), var(--neon-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .game-container {
            max-width: 900px;
            margin: auto;
            padding: 20px;
        }

        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .mode-btn {
            background: var(--glass);
            border: 2px solid rgba(0, 234, 255, 0.3);
            color: var(--neon-blue);
            padding: 12px 20px;
            border-radius: 16px;
            font-weight: 700;
            cursor: pointer;
        }

        .mode-btn.active {
            border-color: var(--neon-green);
            color: var(--neon-green);
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .status {
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            color: var(--neon-green);
        }

        .score-number {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            color: var(--neon-blue);
        }

        .btn {
            background: var(--glass);
            border: 1px solid rgba(0, 234, 255, 0.3);
            color: var(--neon-blue);
            padding: 10px 20px;
            border-radius: 12px;
            cursor: pointer;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            max-width: 450px;
            margin: auto;
            padding: 25px;
            background: var(--glass);
            border-radius: 24px;
        }

        .cell {
            aspect-ratio: 1;
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(0,234,255,0.2);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            font-family: 'Orbitron', monospace;
            cursor: pointer;
        }

        .cell.x { color: var(--neon-blue); }
        .cell.o { color: var(--neon-green); }

        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.85);
            align-items: center;
            justify-content: center;
        }

        .modal.active { display: flex; }

        .modal-content {
            background: var(--dark-blue);
            padding: 40px;
            border-radius: 24px;
            border: 2px solid var(--neon-blue);
            text-align: center;
        }

        footer {
            text-align: center;
            padding: 40px;
            opacity: 0.6;
        }
    </style>
</head>

<body>

<nav>
    <div class="logo">
        <h1 class="logo-text">TIC TAC TOE</h1>
        <p class="tagline">CYBER STRATEGY GRID</p>
    </div>
</nav>

<section class="hero-section">
    <h1 class="page-title">CLASSIC</h1>
</section>

<div class="game-container">

    <div class="mode-selector">
        <button class="mode-btn active" data-mode="human">Human vs Human</button>
        <button class="mode-btn" data-mode="easy">Easy AI</button>
        <button class="mode-btn" data-mode="medium">Medium AI</button>
        <button class="mode-btn" data-mode="hard">Impossible AI</button>
    </div>

    <div class="game-info">
        <div class="status" id="status">X's Turn</div>

        <div class="score">
            <div style="display:inline-block;margin:0 15px;text-align:center;">
                <div id="player1Label">Player X</div>
                <div class="score-number" id="xScore">0</div>
            </div>
            <div style="display:inline-block;margin:0 15px;text-align:center;">
                <div id="player2Label">Player O</div>
                <div class="score-number" id="oScore">0</div>
            </div>
        </div>

        <div>
            <button class="btn" onclick="resetGame()">New Game</button>
            <button class="btn" onclick="resetScore()">Reset Score</button>
        </div>
    </div>

    <div class="game-board">
        <div class="cell" data-index="0"></div>
        <div class="cell" data-index="1"></div>
        <div class="cell" data-index="2"></div>
        <div class="cell" data-index="3"></div>
        <div class="cell" data-index="4"></div>
        <div class="cell" data-index="5"></div>
        <div class="cell" data-index="6"></div>
        <div class="cell" data-index="7"></div>
        <div class="cell" data-index="8"></div>
    </div>
</div>

<div class="modal" id="winModal">
    <div class="modal-content">
        <h2 class="status" id="modalTitle"></h2>
        <button class="btn" onclick="resetGame()">Play Again</button>
    </div>
</div>

<footer>CYBERPUNK TIC TAC TOE</footer>

<script>
/* ======= ONLY LOGIC FIX HERE ======= */
const board = Array(9).fill(null);
let currentPlayer = 'X';
let gameActive = true;
let gameMode = 'human';
let xScore = 0, oScore = 0;

const wins = [
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
];

document.querySelectorAll('.mode-btn').forEach(btn =>
    btn.addEventListener('click', () => setGameMode(btn.dataset.mode))
);

document.querySelectorAll('.cell').forEach(cell =>
    cell.addEventListener('click', handleCellClick)
);

function handleCellClick(e) {
    const index = e.target.dataset.index;
    if (board[index] || !gameActive) return;

    if (gameMode === 'human') {
        makeMove(index, currentPlayer); // âœ… FIX
    } else if (currentPlayer === 'X') {
        makeMove(index, 'X');
    }
}

function makeMove(i, p) {
    board[i] = p;
    const cell = document.querySelector(`[data-index="${i}"]`);
    cell.textContent = p;
    cell.classList.add(p.toLowerCase());

    if (wins.some(w => w.every(x => board[x] === p))) {
        gameActive = false;
        document.getElementById('modalTitle').textContent = `${p} Wins!`;
        document.getElementById('winModal').classList.add('active');
        p === 'X' ? xScore++ : oScore++;
        updateScore();
        return;
    }

    if (!board.includes(null)) {
        gameActive = false;
        document.getElementById('modalTitle').textContent = "It's a Draw!";
        document.getElementById('winModal').classList.add('active');
        return;
    }

    currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
    updateStatus();
}

function updateStatus() {
    document.getElementById('status').textContent =
        gameMode === 'human' ? `${currentPlayer}'s Turn`
        : currentPlayer === 'X' ? "Your Turn" : "AI Thinking...";
}

function updateScore() {
    xScoreEl.textContent = xScore;
    oScoreEl.textContent = oScore;
}

function resetGame() {
    board.fill(null);
    gameActive = true;
    currentPlayer = 'X';
    document.getElementById('winModal').classList.remove('active');
    document.querySelectorAll('.cell').forEach(c=>{
        c.textContent='';
        c.className='cell';
    });
    updateStatus();
}

function resetScore() {
    xScore = oScore = 0;
    updateScore();
    resetGame();
}

function setGameMode(m) {
    gameMode = m;
    document.querySelectorAll('.mode-btn').forEach(b=>b.classList.remove('active'));
    document.querySelector(`[data-mode="${m}"]`).classList.add('active');
    resetGame();
}

const xScoreEl = document.getElementById('xScore');
const oScoreEl = document.getElementById('oScore');
updateStatus();
</script>

</body>
</html>
